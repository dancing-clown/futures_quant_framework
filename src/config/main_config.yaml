# 项目基础配置
project:
  name: "期货行情多源整合框架"
  version: "1.0.0"
  author: "Geason"  # 替换为你的名字
  data_dir: "data"  # 数据目录相对路径

# 日志配置（全链路日志，工程师重点关注）
logger:
  level: "INFO"        # 日志级别：DEBUG/INFO/WARNING/ERROR
  file_path: "logs/futures_framework.log"  # 日志文件路径（相对于项目根目录）
  max_bytes: 10485760  # 单个日志文件大小：10MB
  backup_count: 5      # 日志文件备份数量：5个
  format: "%(asctime)s - %(name)s - %(levelname)s - %(module)s:%(lineno)d - %(message)s"

# 行情源配置（多源开关，按需启用）
market_sources:
  ctp:
    enable: true       # 是否启用CTP行情
    # CTP SimNow 行情地址
    # host: "tcp://182.254.243.31:40011" # 夜盘使用
    host: "tcp://182.254.243.31:30011"  # 日盘使用
    # 不提供登录信息，使用匿名登录
    # broker_id: ""
    # investor_id: ""
    # password: ""
    flow_path: "./flow/" # 流文件路径
    subscribe_codes: ["zn2603", "y2605"]  # 订阅合约代码
    # pybind_path 可选：依赖库所在目录，不填则从 环境变量 CTP_PYBIND_PATH 查找
    pybind_path: "extern_libs/ctp_pybind/build"
  zhengyi_zmq:
    enable: false       # 是否启用正瀛 ZMQ PUB 模式行情
    dce_address: "tcp://101.133.152.163:23333" # 大商所 ZMQ 地址
    czce_address: "tcp://101.133.152.163:23355" # 郑商所 ZMQ 地址
    poll_timeout_ms: 100      # ZMQ socket 轮询超时（毫秒）
    receive_sleep_interval: 0.01   # 无数据时休眠（秒）
    error_retry_interval: 1   # 接收异常后重试间隔（秒）
  nsq_dce_net_api:
    enable: false       # 是否启用 NSQ-DCE 行情（仅支持 Linux）
    config_path: "config/nsq_config.toml"
    # 以下字段可选：如不想在本框架重复配置，可只填写 config_path
    username: ""
    password: ""
    sdk_config_path: "config/sdk_config.ini"
    log_path: "./logs/"
    log_file: "logs/nsq_market.log"
    markets: "dce"
    # pybind_path 可选：依赖库所在目录，不填则从 NSQ_PYBIND_PATH 查找
    pybind_path: "extern_libs/nsq_pybind/build"

  hs_future_gfex_api:
    enable: false       # 是否启用 GFEX ExaNIC 行情（仅支持 Linux，需 exanic_pybind）
    nic_name: "exanic0" # ExaNIC 设备名（/dev/exanic0）
    port_number: 1      # 端口号
    buffer_number: 0    # RX buffer 编号
    frame_buffer_size: 2048  # 单帧接收缓冲区大小（字节）
    # pybind_path 可选：pybind 所在目录，不填则从 GFEX_EXANIC_PYBIND_PATH 查找
    pybind_path: "extern_libs/exanic_pybind/build"

# 采集策略配置
collect:
  mode: "async"        # 采集模式：async（异步，推荐）/sync（同步）
  interval: 0.1        # 同步/异步分发轮询间隔（秒）
  dispatch_interval: 0.1  # 异步模式下 dispatch_loop 轮询间隔（秒）
  retry_count: 3       # 采集失败重试次数
  retry_interval: 1    # 重试间隔（秒）
  timeout: 5           # 接口超时时间（秒）

# 数据清洗/处理配置
processor:
  clean:
    max_seen_size: 10000  # 去重缓存最大条数，超过则清空

# 数据存储配置（多存储方案，按需启用）
storage:
  default: "tsdb"      # 默认存储方案：tsdb/file/redis
  tsdb:
    enable: false
    type: "influxdb"   # 时序库类型：influxdb/timescaledb
    host: "127.0.0.1"
    port: 8086
    database: "futures_market"
    token: "your_influxdb_token"
    org: "futures_org"
  file:
    enable: true
    base_path: "data/market_data"  # 文件存储根目录（相对项目根）
    type: "parquet"    # 文件格式：parquet（推荐，压缩比高）/csv
    save_interval: 60  # 定时保存间隔（秒）
  redis:
    enable: false
    host: "172.16.13.8"
    port: 6379
    db: 0
    password: ""
    expire: 3600       # 缓存过期时间（秒）